---
description: 
globs: tests/**/*.ts,test-data/**
alwaysApply: false
---
# Playwright Test Data Management

Each test should properly handle test data to ensure isolation and maintainability. This rule provides guidance on test data management in our TypeScript Playwright framework.

## Key Principles

1. **Test Isolation**: Each test should be completely independent
2. **Data Creation**: Tests should create or fetch their own test data
3. **Cleanup**: Tests should clean up any data they create
4. **No Shared State**: Don't rely on data created by other tests
5. **Import Data Utilities**: Import test data utilities directly in tests

## Fixture-Based Test Data Management

Only fundamental test data should be managed through fixtures to ensure a standard approach and proper isolation.

### Base Fixtures for Authentication Data

The `base-fixtures.ts` file provides foundational fixtures like candidate credentials:

```typescript
// utils/base-fixtures.ts
import { test as base } from "@playwright/test";
import { getCandidateCredentials } from "utils";

type CustomFixtures = {
  getUniqueCandidateCredentials: { email: string; password: string };
};

export const test = base.extend<CustomFixtures>({
    getUniqueCandidateCredentials: async ({}, use, testInfo) => {
        const credentials = getCandidateCredentials(testInfo.title);
        console.log(`Using candidate email: ${credentials.email} for test: ${testInfo.title}`);
    
        await use(credentials);
    }
});
```

## Utility-Based Test Data

Import utility functions directly in tests for most test data needs:

```typescript
// tests/recruiter/login/login.spec.ts
import { test, expect } from './fixtures';
import { getCompanyData } from "utils";

test.describe("Recruiter Login", () => {
  test("should login successfully", async ({ loginPage, topNavbar }) => {
    const { ADMIN, PASSWORD } = getCompanyData("qa_test_company_15");
    
    await loginPage.navigateTo();
    await loginPage.login(ADMIN, PASSWORD);
    
    await expect(topNavbar.assessmentsLink).toBeVisible();
  });
});
```

## Dynamic Data Generation

Import data generators directly from utils:

```typescript
// tests/recruiter/assessment/create.spec.ts
import { test, expect } from './fixtures';
import { 
  generateRandomEmail, 
  generateRandomAssessmentName 
} from "utils";

test("should create a new assessment", async ({ assessmentPage }) => {
  const uniqueEmail = generateRandomEmail();
  const assessmentName = generateRandomAssessmentName();
  
  await assessmentPage.navigateTo();
  await assessmentPage.fillAssessmentDetails({
    name: assessmentName,
    adminEmail: uniqueEmail
  });
  
  await expect(assessmentPage.successMessage).toBeVisible();
});
```

## Test Data Storage

Keep test data organized in appropriate directories:

```
test-data/
  ├── candidates/           # Candidate test data
  │   └── infy_pref_test_users_40K/  # Bulk test user data
  └── companies/            # Company/recruiter test data
```

